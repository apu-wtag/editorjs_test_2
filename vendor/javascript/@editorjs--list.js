// @editorjs/list@2.0.8 downloaded from https://ga.jspm.io/npm:@editorjs/list@2.0.8/dist/editorjs-list.mjs

(function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('.cdx-list{margin:0;padding:0;outline:none;display:grid;counter-reset:item;gap:var(--spacing-s);padding:var(--spacing-xs);--spacing-s: 8px;--spacing-xs: 6px;--list-counter-type: numeric;--radius-border: 5px;--checkbox-background: #fff;--color-border: #C9C9C9;--color-bg-checked: #369FFF;--line-height: 1.45em;--color-bg-checked-hover: #0059AB;--color-tick: #fff;--size-checkbox: 1.2em}.cdx-list__item{line-height:var(--line-height);display:grid;grid-template-columns:auto 1fr;grid-template-rows:auto auto;grid-template-areas:"checkbox content" ". child"}.cdx-list__item-children{display:grid;grid-area:child;gap:var(--spacing-s);padding-top:var(--spacing-s)}.cdx-list__item [contenteditable]{outline:none}.cdx-list__item-content{word-break:break-word;white-space:pre-wrap;grid-area:content;padding-left:var(--spacing-s)}.cdx-list__item:before{counter-increment:item;white-space:nowrap}.cdx-list-ordered .cdx-list__item:before{content:counters(item,".",var(--list-counter-type)) "."}.cdx-list-ordered{counter-reset:item}.cdx-list-unordered .cdx-list__item:before{content:"•"}.cdx-list-checklist .cdx-list__item:before{content:""}.cdx-list__settings .cdx-settings-button{width:50%}.cdx-list__checkbox{padding-top:calc((var(--line-height) - var(--size-checkbox)) / 2);grid-area:checkbox;width:var(--size-checkbox);height:var(--size-checkbox);display:flex;cursor:pointer}.cdx-list__checkbox svg{opacity:0;height:var(--size-checkbox);width:var(--size-checkbox);left:-1px;top:-1px;position:absolute}@media (hover: hover){.cdx-list__checkbox:not(.cdx-list__checkbox--no-hover):hover .cdx-list__checkbox-check svg{opacity:1}}.cdx-list__checkbox--checked{line-height:var(--line-height)}@media (hover: hover){.cdx-list__checkbox--checked:not(.cdx-list__checkbox--checked--no-hover):hover .cdx-checklist__checkbox-check{background:var(--color-bg-checked-hover);border-color:var(--color-bg-checked-hover)}}.cdx-list__checkbox--checked .cdx-list__checkbox-check{background:var(--color-bg-checked);border-color:var(--color-bg-checked)}.cdx-list__checkbox--checked .cdx-list__checkbox-check svg{opacity:1}.cdx-list__checkbox--checked .cdx-list__checkbox-check svg path{stroke:var(--color-tick)}.cdx-list__checkbox--checked .cdx-list__checkbox-check:before{opacity:0;visibility:visible;transform:scale(2.5)}.cdx-list__checkbox-check{cursor:pointer;display:inline-block;position:relative;margin:0 auto;width:var(--size-checkbox);height:var(--size-checkbox);box-sizing:border-box;border-radius:var(--radius-border);border:1px solid var(--color-border);background:var(--checkbox-background)}.cdx-list__checkbox-check:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;border-radius:100%;background-color:var(--color-bg-checked);visibility:hidden;pointer-events:none;transform:scale(1);transition:transform .4s ease-out,opacity .4s}.cdx-list-start-with-field{background:#F8F8F8;border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:2px;display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto}.cdx-list-start-with-field--invalid{background:#FFECED;border:1px solid #E13F3F}.cdx-list-start-with-field--invalid .cdx-list-start-with-field__input{color:#e13f3f}.cdx-list-start-with-field__input{font-size:14px;outline:none;font-weight:500;font-family:inherit;border:0;background:transparent;margin:0;padding:0;line-height:22px;min-width:calc(100% - var(--toolbox-buttons-size) - var(--icon-margin-right))}.cdx-list-start-with-field__input::placeholder{color:var(--grayText);font-weight:500}')),document.head.appendChild(e)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const e='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 12L10.4884 15.8372C10.5677 15.9245 10.705 15.9245 10.7844 15.8372L17 9"/></svg>',t='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9.2 12L11.0586 13.8586C11.1367 13.9367 11.2633 13.9367 11.3414 13.8586L14.7 10.5"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',n='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="9" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 17H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 12H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 7H4.99002"/></svg>',r='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="12" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.79999 14L7.79999 7.2135C7.79999 7.12872 7.7011 7.0824 7.63597 7.13668L4.79999 9.5"/></svg>',i='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 14.2L10 7.4135C10 7.32872 9.90111 7.28241 9.83598 7.33668L7 9.7" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M13.2087 14.2H13.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/></svg>',o='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.2087 14.2H13.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M10 14.2L10 9.5" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M10 7.01L10 7" stroke="black" stroke-width="1.8" stroke-linecap="round"/></svg>',a='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.2087 14.2H13.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M10 14.2L10 7.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/></svg>',s='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16.0087 14.2H16" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M7 14.2L7.78865 12M13 14.2L12.1377 12M7.78865 12C7.78865 12 9.68362 7 10 7C10.3065 7 12.1377 12 12.1377 12M7.78865 12L12.1377 12" stroke="black" stroke-width="1.6" stroke-linecap="round"/></svg>',l='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.2087 14.2H14.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M11.5 14.5C11.5 14.5 11 13.281 11 12.5M7 9.5C7 9.5 7.5 8.5 9 8.5C10.5 8.5 11 9.5 11 10.5L11 11.5M11 11.5L11 12.5M11 11.5C11 11.5 7 11 7 13C7 15.3031 11 15 11 12.5" stroke="black" stroke-width="1.6" stroke-linecap="round"/></svg>',c='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 14.2L8 7.4135C8 7.32872 7.90111 7.28241 7.83598 7.33668L5 9.7" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M14 13L16.4167 10.7778M16.4167 10.7778L14 8.5M16.4167 10.7778H11.6562" stroke="black" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>';var d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function u(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}var p={},h={},g={};Object.defineProperty(g,"__esModule",{value:!0});g.allInputsSelector=m;function m(){var e=["text","password","email","number","search","tel","url"];return"[contenteditable=true], textarea, input:not([type]), "+e.map((function(e){return'input[type="'.concat(e,'"]')})).join(", ")}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.allInputsSelector=void 0;var t=g;Object.defineProperty(e,"allInputsSelector",{enumerable:!0,get:function(){return t.allInputsSelector}})})(h);var y={},k={};Object.defineProperty(k,"__esModule",{value:!0});k.isNativeInput=C;function C(e){var t=["INPUT","TEXTAREA"];return!(!e||!e.tagName)&&t.includes(e.tagName)}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isNativeInput=void 0;var t=k;Object.defineProperty(e,"isNativeInput",{enumerable:!0,get:function(){return t.isNativeInput}})})(y);var O={},_={};Object.defineProperty(_,"__esModule",{value:!0});_.append=S;function S(e,t){Array.isArray(t)?t.forEach((function(t){e.appendChild(t)})):e.appendChild(t)}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.append=void 0;var t=_;Object.defineProperty(e,"append",{enumerable:!0,get:function(){return t.append}})})(O);var w={},E={};Object.defineProperty(E,"__esModule",{value:!0});E.blockElements=x;function x(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.blockElements=void 0;var t=E;Object.defineProperty(e,"blockElements",{enumerable:!0,get:function(){return t.blockElements}})})(w);var P={},j={};Object.defineProperty(j,"__esModule",{value:!0});j.calculateBaseline=M;function M(e){var t=window.getComputedStyle(e),n=parseFloat(t.fontSize),r=parseFloat(t.lineHeight)||n*1.2,i=parseFloat(t.paddingTop),o=parseFloat(t.borderTopWidth),a=parseFloat(t.marginTop),s=n*.8,l=(r-n)/2,c=a+o+i+l+s;return c}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.calculateBaseline=void 0;var t=j;Object.defineProperty(e,"calculateBaseline",{enumerable:!0,get:function(){return t.calculateBaseline}})})(P);var T={},I={},L={},N={};Object.defineProperty(N,"__esModule",{value:!0});N.isContentEditable=A;function A(e){return e.contentEditable==="true"}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isContentEditable=void 0;var t=N;Object.defineProperty(e,"isContentEditable",{enumerable:!0,get:function(){return t.isContentEditable}})})(L);Object.defineProperty(I,"__esModule",{value:!0});I.canSetCaret=D;var B=y,W=L;function D(e){var t=!0;if((0,B.isNativeInput)(e))switch(e.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":t=!1;break}else t=(0,W.isContentEditable)(e);return t}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.canSetCaret=void 0;var t=I;Object.defineProperty(e,"canSetCaret",{enumerable:!0,get:function(){return t.canSetCaret}})})(T);var R={},H={};function F(e,t,n){const r=n.value!==void 0?"value":"get",i=n[r],o=`#${t}Cache`;if(n[r]=function(...e){return this[o]===void 0&&(this[o]=i.apply(this,e)),this[o]},r==="get"&&n.set){const t=n.set;n.set=function(n){delete e[o],t.apply(this,n)}}return n}function $(){const e={win:!1,mac:!1,x11:!1,linux:!1},t=Object.keys(e).find((e=>window.navigator.appVersion.toLowerCase().indexOf(e)!==-1));return t!==void 0&&(e[t]=!0),e}function U(e){return e!=null&&e!==""&&(typeof e!="object"||Object.keys(e).length>0)}function q(e){return!U(e)}const K=()=>typeof window<"u"&&window.navigator!==null&&U(window.navigator.platform)&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);function X(e){const t=$();return e=e.replace(/shift/gi,"⇧").replace(/backspace/gi,"⌫").replace(/enter/gi,"⏎").replace(/up/gi,"↑").replace(/left/gi,"→").replace(/down/gi,"↓").replace(/right/gi,"←").replace(/escape/gi,"⎋").replace(/insert/gi,"Ins").replace(/delete/gi,"␡").replace(/\+/gi,"+"),e=t.mac?e.replace(/ctrl|cmd/gi,"⌘").replace(/alt/gi,"⌥"):e.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN"),e}function V(e){return e[0].toUpperCase()+e.slice(1)}function Y(e){const t=document.createElement("div");t.style.position="absolute",t.style.left="-999px",t.style.bottom="-999px",t.innerHTML=e,document.body.appendChild(t);const n=window.getSelection(),r=document.createRange();if(r.selectNode(t),n===null)throw new Error("Cannot copy text to clipboard");n.removeAllRanges(),n.addRange(r),document.execCommand("copy"),document.body.removeChild(t)}function Q(e,t,n){let r;return(...i)=>{const o=this,a=()=>{r=void 0,n!==!0&&e.apply(o,i)},s=n===!0&&r!==void 0;window.clearTimeout(r),r=window.setTimeout(a,t),s&&e.apply(o,i)}}function Z(e){return Object.prototype.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function J(e){return Z(e)==="boolean"}function ee(e){return Z(e)==="function"||Z(e)==="asyncfunction"}function te(e){return ee(e)&&/^\s*class\s+/.test(e.toString())}function ne(e){return Z(e)==="number"}function re(e){return Z(e)==="object"}function ie(e){return Promise.resolve(e)===e}function oe(e){return Z(e)==="string"}function ae(e){return Z(e)==="undefined"}function se(e,...t){if(!t.length)return e;const n=t.shift();if(re(e)&&re(n))for(const t in n)re(n[t])?(e[t]===void 0&&Object.assign(e,{[t]:{}}),se(e[t],n[t])):Object.assign(e,{[t]:n[t]});return se(e,...t)}function le(e,t,n){const r=`«${t}» is deprecated and will be removed in the next major release. Please use the «${n}» instead.`;e&&console.warn(r)}function ce(e){try{return new URL(e).href}catch{}return e.substring(0,2)==="//"?window.location.protocol+e:window.location.origin+e}function de(e){return e>47&&e<58||e===32||e===13||e===229||e>64&&e<91||e>95&&e<112||e>185&&e<193||e>218&&e<223}const ue={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46,META:91,SLASH:191},pe={LEFT:0,WHEEL:1,RIGHT:2,BACKWARD:3,FORWARD:4};class tn{constructor(){this.completed=Promise.resolve()}
/**
   * Add new promise to queue
   * @param operation - promise should be added to queue
   */add(e){return new Promise(((t,n)=>{this.completed=this.completed.then(e).then(t).catch(n)}))}}function fe(e,t,n=void 0){let r,i,o,a=null,s=0;n||(n={});const l=function(){s=n.leading===!1?0:Date.now(),a=null,o=e.apply(r,i),a===null&&(r=i=null)};return function(){const c=Date.now();!s&&n.leading===!1&&(s=c);const d=t-(c-s);return r=this,i=arguments,d<=0||d>t?(a&&(clearTimeout(a),a=null),s=c,o=e.apply(r,i),a===null&&(r=i=null)):!a&&n.trailing!==!1&&(a=setTimeout(l,d)),o}}const he=Object.freeze(Object.defineProperty({__proto__:null,PromiseQueue:tn,beautifyShortcut:X,cacheable:F,capitalize:V,copyTextToClipboard:Y,debounce:Q,deepMerge:se,deprecationAssert:le,getUserOS:$,getValidUrl:ce,isBoolean:J,isClass:te,isEmpty:q,isFunction:ee,isIosDevice:K,isNumber:ne,isObject:re,isPrintableKey:de,isPromise:ie,isString:oe,isUndefined:ae,keyCodes:ue,mouseButtons:pe,notEmpty:U,throttle:fe,typeOf:Z},Symbol.toStringTag,{value:"Module"})),ve=u(he);Object.defineProperty(H,"__esModule",{value:!0});H.containsOnlyInlineElements=be;var ge=ve,me=w;function be(e){var t;(0,ge.isString)(e)?(t=document.createElement("div"),t.innerHTML=e):t=e;var n=function(e){return!(0,me.blockElements)().includes(e.tagName.toLowerCase())&&Array.from(e.children).every(n)};return Array.from(t.children).every(n)}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.containsOnlyInlineElements=void 0;var t=H;Object.defineProperty(e,"containsOnlyInlineElements",{enumerable:!0,get:function(){return t.containsOnlyInlineElements}})})(R);var ye={},ke={},Ce={},Oe={};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.make=_e;function _e(e,t,n){var r;t===void 0&&(t=null),n===void 0&&(n={});var i=document.createElement(e);if(Array.isArray(t)){var o=t.filter((function(e){return e!==void 0}));(r=i.classList).add.apply(r,o)}else t!==null&&i.classList.add(t);for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a]);return i}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.make=void 0;var t=Oe;Object.defineProperty(e,"make",{enumerable:!0,get:function(){return t.make}})})(Ce);Object.defineProperty(ke,"__esModule",{value:!0});ke.fragmentToString=we;var Se=Ce;function we(e){var t=(0,Se.make)("div");return t.appendChild(e),t.innerHTML}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fragmentToString=void 0;var t=ke;Object.defineProperty(e,"fragmentToString",{enumerable:!0,get:function(){return t.fragmentToString}})})(ye);var Ee={},xe={};Object.defineProperty(xe,"__esModule",{value:!0});xe.getContentLength=je;var Pe=y;function je(e){var t,n;return(0,Pe.isNativeInput)(e)?e.value.length:e.nodeType===Node.TEXT_NODE?e.length:(n=(t=e.textContent)===null||t===void 0?void 0:t.length)!==null&&n!==void 0?n:0}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getContentLength=void 0;var t=xe;Object.defineProperty(e,"getContentLength",{enumerable:!0,get:function(){return t.getContentLength}})})(Ee);var Me={},Te={},Ie=d&&d.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var r,i=0,o=t.length;i<o;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(Te,"__esModule",{value:!0});Te.getDeepestBlockElements=Ne;var Le=R;function Ne(e){return(0,Le.containsOnlyInlineElements)(e)?[e]:Array.from(e.children).reduce((function(e,t){return Ie(Ie([],e,!0),Ne(t),!0)}),[])}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getDeepestBlockElements=void 0;var t=Te;Object.defineProperty(e,"getDeepestBlockElements",{enumerable:!0,get:function(){return t.getDeepestBlockElements}})})(Me);var Ae={},Be={},We={},De={};Object.defineProperty(De,"__esModule",{value:!0});De.isLineBreakTag=Re;function Re(e){return["BR","WBR"].includes(e.tagName)}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isLineBreakTag=void 0;var t=De;Object.defineProperty(e,"isLineBreakTag",{enumerable:!0,get:function(){return t.isLineBreakTag}})})(We);var He={},Fe={};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.isSingleTag=$e;function $e(e){return["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(e.tagName)}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isSingleTag=void 0;var t=Fe;Object.defineProperty(e,"isSingleTag",{enumerable:!0,get:function(){return t.isSingleTag}})})(He);Object.defineProperty(Be,"__esModule",{value:!0});Be.getDeepestNode=Ge;var ze=y,Ue=We,qe=He;function Ge(e,t){t===void 0&&(t=!1);var n=t?"lastChild":"firstChild",r=t?"previousSibling":"nextSibling";if(e.nodeType===Node.ELEMENT_NODE&&e[n]){var i=e[n];if((0,qe.isSingleTag)(i)&&!(0,ze.isNativeInput)(i)&&!(0,Ue.isLineBreakTag)(i))if(i[r])i=i[r];else{if(i.parentNode===null||!i.parentNode[r])return i.parentNode;i=i.parentNode[r]}return Ge(i,t)}return e}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getDeepestNode=void 0;var t=Be;Object.defineProperty(e,"getDeepestNode",{enumerable:!0,get:function(){return t.getDeepestNode}})})(Ae);var Ke={},Xe={},Ve=d&&d.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var r,i=0,o=t.length;i<o;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.findAllInputs=et;var Ye=R,Qe=Me,Ze=h,Je=y;function et(e){return Array.from(e.querySelectorAll((0,Ze.allInputsSelector)())).reduce((function(e,t){return(0,Je.isNativeInput)(t)||(0,Ye.containsOnlyInlineElements)(t)?Ve(Ve([],e,!0),[t],!1):Ve(Ve([],e,!0),(0,Qe.getDeepestBlockElements)(t),!0)}),[])}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.findAllInputs=void 0;var t=Xe;Object.defineProperty(e,"findAllInputs",{enumerable:!0,get:function(){return t.findAllInputs}})})(Ke);var tt={},nt={};Object.defineProperty(nt,"__esModule",{value:!0});nt.isCollapsedWhitespaces=rt;function rt(e){return!/[^\t\n\r ]/.test(e)}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isCollapsedWhitespaces=void 0;var t=nt;Object.defineProperty(e,"isCollapsedWhitespaces",{enumerable:!0,get:function(){return t.isCollapsedWhitespaces}})})(tt);var it={},ot={};Object.defineProperty(ot,"__esModule",{value:!0});ot.isElement=st;var at=ve;function st(e){return!(0,at.isNumber)(e)&&(!!e&&!!e.nodeType&&e.nodeType===Node.ELEMENT_NODE)}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isElement=void 0;var t=ot;Object.defineProperty(e,"isElement",{enumerable:!0,get:function(){return t.isElement}})})(it);var lt={},ct={},dt={},ut={};Object.defineProperty(ut,"__esModule",{value:!0});ut.isLeaf=pt;function pt(e){return e!==null&&e.childNodes.length===0}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isLeaf=void 0;var t=ut;Object.defineProperty(e,"isLeaf",{enumerable:!0,get:function(){return t.isLeaf}})})(dt);var ft={},ht={};Object.defineProperty(ht,"__esModule",{value:!0});ht.isNodeEmpty=yt;var vt=We,gt=it,mt=y,bt=He;function yt(e,t){var n="";return!((0,bt.isSingleTag)(e)&&!(0,vt.isLineBreakTag)(e))&&((0,gt.isElement)(e)&&(0,mt.isNativeInput)(e)?n=e.value:e.textContent!==null&&(n=e.textContent.replace("​","")),t!==void 0&&(n=n.replace(new RegExp(t,"g"),"")),n.trim().length===0)}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeEmpty=void 0;var t=ht;Object.defineProperty(e,"isNodeEmpty",{enumerable:!0,get:function(){return t.isNodeEmpty}})})(ft);Object.defineProperty(ct,"__esModule",{value:!0});ct.isEmpty=Ot;var kt=dt,Ct=ft;function Ot(e,t){e.normalize();for(var n=[e];n.length>0;){var r=n.shift();if(r){if(e=r,(0,kt.isLeaf)(e)&&!(0,Ct.isNodeEmpty)(e,t))return!1;n.push.apply(n,Array.from(e.childNodes))}}return!0}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isEmpty=void 0;var t=ct;Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return t.isEmpty}})})(lt);var _t={},St={};Object.defineProperty(St,"__esModule",{value:!0});St.isFragment=Et;var wt=ve;function Et(e){return!(0,wt.isNumber)(e)&&(!!e&&!!e.nodeType&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE)}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isFragment=void 0;var t=St;Object.defineProperty(e,"isFragment",{enumerable:!0,get:function(){return t.isFragment}})})(_t);var xt={},Pt={};Object.defineProperty(Pt,"__esModule",{value:!0});Pt.isHTMLString=Mt;var jt=Ce;function Mt(e){var t=(0,jt.make)("div");return t.innerHTML=e,t.childElementCount>0}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isHTMLString=void 0;var t=Pt;Object.defineProperty(e,"isHTMLString",{enumerable:!0,get:function(){return t.isHTMLString}})})(xt);var Tt={},It={};Object.defineProperty(It,"__esModule",{value:!0});It.offset=Lt;function Lt(e){var t=e.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop,i=t.top+r,o=t.left+n;return{top:i,left:o,bottom:i+t.height,right:o+t.width}}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.offset=void 0;var t=It;Object.defineProperty(e,"offset",{enumerable:!0,get:function(){return t.offset}})})(Tt);var Nt={},At={};Object.defineProperty(At,"__esModule",{value:!0});At.prepend=Bt;function Bt(e,t){Array.isArray(t)?(t=t.reverse(),t.forEach((function(t){return e.prepend(t)}))):e.prepend(t)}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.prepend=void 0;var t=At;Object.defineProperty(e,"prepend",{enumerable:!0,get:function(){return t.prepend}})})(Nt);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.prepend=e.offset=e.make=e.isLineBreakTag=e.isSingleTag=e.isNodeEmpty=e.isLeaf=e.isHTMLString=e.isFragment=e.isEmpty=e.isElement=e.isContentEditable=e.isCollapsedWhitespaces=e.findAllInputs=e.isNativeInput=e.allInputsSelector=e.getDeepestNode=e.getDeepestBlockElements=e.getContentLength=e.fragmentToString=e.containsOnlyInlineElements=e.canSetCaret=e.calculateBaseline=e.blockElements=e.append=void 0;var t=h;Object.defineProperty(e,"allInputsSelector",{enumerable:!0,get:function(){return t.allInputsSelector}});var n=y;Object.defineProperty(e,"isNativeInput",{enumerable:!0,get:function(){return n.isNativeInput}});var r=O;Object.defineProperty(e,"append",{enumerable:!0,get:function(){return r.append}});var i=w;Object.defineProperty(e,"blockElements",{enumerable:!0,get:function(){return i.blockElements}});var o=P;Object.defineProperty(e,"calculateBaseline",{enumerable:!0,get:function(){return o.calculateBaseline}});var a=T;Object.defineProperty(e,"canSetCaret",{enumerable:!0,get:function(){return a.canSetCaret}});var s=R;Object.defineProperty(e,"containsOnlyInlineElements",{enumerable:!0,get:function(){return s.containsOnlyInlineElements}});var l=ye;Object.defineProperty(e,"fragmentToString",{enumerable:!0,get:function(){return l.fragmentToString}});var c=Ee;Object.defineProperty(e,"getContentLength",{enumerable:!0,get:function(){return c.getContentLength}});var d=Me;Object.defineProperty(e,"getDeepestBlockElements",{enumerable:!0,get:function(){return d.getDeepestBlockElements}});var u=Ae;Object.defineProperty(e,"getDeepestNode",{enumerable:!0,get:function(){return u.getDeepestNode}});var p=Ke;Object.defineProperty(e,"findAllInputs",{enumerable:!0,get:function(){return p.findAllInputs}});var g=tt;Object.defineProperty(e,"isCollapsedWhitespaces",{enumerable:!0,get:function(){return g.isCollapsedWhitespaces}});var m=L;Object.defineProperty(e,"isContentEditable",{enumerable:!0,get:function(){return m.isContentEditable}});var k=it;Object.defineProperty(e,"isElement",{enumerable:!0,get:function(){return k.isElement}});var C=lt;Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return C.isEmpty}});var _=_t;Object.defineProperty(e,"isFragment",{enumerable:!0,get:function(){return _.isFragment}});var S=xt;Object.defineProperty(e,"isHTMLString",{enumerable:!0,get:function(){return S.isHTMLString}});var E=dt;Object.defineProperty(e,"isLeaf",{enumerable:!0,get:function(){return E.isLeaf}});var x=ft;Object.defineProperty(e,"isNodeEmpty",{enumerable:!0,get:function(){return x.isNodeEmpty}});var j=We;Object.defineProperty(e,"isLineBreakTag",{enumerable:!0,get:function(){return j.isLineBreakTag}});var M=He;Object.defineProperty(e,"isSingleTag",{enumerable:!0,get:function(){return M.isSingleTag}});var I=Ce;Object.defineProperty(e,"make",{enumerable:!0,get:function(){return I.make}});var N=Tt;Object.defineProperty(e,"offset",{enumerable:!0,get:function(){return N.offset}});var A=Nt;Object.defineProperty(e,"prepend",{enumerable:!0,get:function(){return A.prepend}})})(p);const Wt="cdx-list",Dt={wrapper:Wt,item:`${Wt}__item`,itemContent:`${Wt}__item-content`,itemChildren:`${Wt}__item-children`};class v{static get CSS(){return{...Dt,orderedList:`${Wt}-ordered`}}
/**
   * Assign passed readonly mode and config to relevant class properties
   * @param readonly - read-only mode flag
   * @param config - user config for Tool
   */constructor(e,t){this.config=t,this.readOnly=e
/**
   * Renders ol wrapper for list
   * @param isRoot - boolean variable that represents level of the wrappre (root or childList)
   * @returns - created html ol element
   */}renderWrapper(e){let t;return t=e===!0?p.make("ol",[v.CSS.wrapper,v.CSS.orderedList]):p.make("ol",[v.CSS.orderedList,v.CSS.itemChildren]),t
/**
   * Redners list item element
   * @param content - content used in list item rendering
   * @param _meta - meta of the list item unused in rendering of the ordered list
   * @returns - created html list item element
   */}renderItem(e,t){const n=p.make("li",v.CSS.item),r=p.make("div",v.CSS.itemContent,{innerHTML:e,contentEditable:(!this.readOnly).toString()});return n.appendChild(r),n
/**
   * Return the item content
   * @param item - item wrapper (<li>)
   * @returns - item content string
   */}getItemContent(e){const t=e.querySelector(`.${v.CSS.itemContent}`);return!t||p.isEmpty(t)?"":t.innerHTML}
/**
   * Returns item meta, for ordered list
   * @returns item meta object
   */getItemMeta(){return{}}composeDefaultMeta(){return{}}}class b{static get CSS(){return{...Dt,unorderedList:`${Wt}-unordered`}}
/**
   * Assign passed readonly mode and config to relevant class properties
   * @param readonly - read-only mode flag
   * @param config - user config for Tool
   */constructor(e,t){this.config=t,this.readOnly=e
/**
   * Renders ol wrapper for list
   * @param isRoot - boolean variable that represents level of the wrappre (root or childList)
   * @returns - created html ul element
   */}renderWrapper(e){let t;return t=e===!0?p.make("ul",[b.CSS.wrapper,b.CSS.unorderedList]):p.make("ul",[b.CSS.unorderedList,b.CSS.itemChildren]),t
/**
   * Redners list item element
   * @param content - content used in list item rendering
   * @param _meta - meta of the list item unused in rendering of the unordered list
   * @returns - created html list item element
   */}renderItem(e,t){const n=p.make("li",b.CSS.item),r=p.make("div",b.CSS.itemContent,{innerHTML:e,contentEditable:(!this.readOnly).toString()});return n.appendChild(r),n
/**
   * Return the item content
   * @param item - item wrapper (<li>)
   * @returns - item content string
   */}getItemContent(e){const t=e.querySelector(`.${b.CSS.itemContent}`);return!t||p.isEmpty(t)?"":t.innerHTML}
/**
   * Returns item meta, for unordered list
   * @returns Item meta object
   */getItemMeta(){return{}}composeDefaultMeta(){return{}}}function Rt(e){return e.nodeType===Node.ELEMENT_NODE}var Ht={},Ft={},$t={},zt={};Object.defineProperty(zt,"__esModule",{value:!0});zt.getContenteditableSlice=qt;var Ut=p;function qt(e,t,n,r,i){var o;i===void 0&&(i=!1);var a=document.createRange();if(r==="left"?(a.setStart(e,0),a.setEnd(t,n)):(a.setStart(t,n),a.setEnd(e,e.childNodes.length)),i===!0){var s=a.extractContents();return(0,Ut.fragmentToString)(s)}var l=a.cloneContents(),c=document.createElement("div");c.appendChild(l);var d=(o=c.textContent)!==null&&o!==void 0?o:"";return d}Object.defineProperty($t,"__esModule",{value:!0});$t.checkContenteditableSliceForEmptiness=Xt;var Gt=p,Kt=zt;function Xt(e,t,n,r){var i=(0,Kt.getContenteditableSlice)(e,t,n,r);return(0,Gt.isCollapsedWhitespaces)(i)}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.checkContenteditableSliceForEmptiness=void 0;var t=$t;Object.defineProperty(e,"checkContenteditableSliceForEmptiness",{enumerable:!0,get:function(){return t.checkContenteditableSliceForEmptiness}})})(Ft);var Vt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getContenteditableSlice=void 0;var t=zt;Object.defineProperty(e,"getContenteditableSlice",{enumerable:!0,get:function(){return t.getContenteditableSlice}})})(Vt);var Yt={},Qt={};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.focus=Jt;var Zt=p;function Jt(e,t){var n,r;if(t===void 0&&(t=!0),(0,Zt.isNativeInput)(e)){e.focus();var i=t?0:e.value.length;e.setSelectionRange(i,i)}else{var o=document.createRange(),a=window.getSelection();if(!a)return;var s=function(e,t){t===void 0&&(t=!1);var n=document.createTextNode("");t?e.insertBefore(n,e.firstChild):e.appendChild(n),o.setStart(n,0),o.setEnd(n,0)},l=function(e){return e!=null},c=e.childNodes,d=t?c[0]:c[c.length-1];if(l(d)){for(;l(d)&&d.nodeType!==Node.TEXT_NODE;)d=t?d.firstChild:d.lastChild;if(l(d)&&d.nodeType===Node.TEXT_NODE){var u=(r=(n=d.textContent)===null||n===void 0?void 0:n.length)!==null&&r!==void 0?r:0;i=t?0:u;o.setStart(d,i),o.setEnd(d,i)}else s(e,t)}else s(e);a.removeAllRanges(),a.addRange(o)}}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.focus=void 0;var t=Qt;Object.defineProperty(e,"focus",{enumerable:!0,get:function(){return t.focus}})})(Yt);var en={},nn={};Object.defineProperty(nn,"__esModule",{value:!0});nn.getCaretNodeAndOffset=rn;function rn(){var e=window.getSelection();if(e===null)return[null,0];var t=e.focusNode,n=e.focusOffset;return t===null?[null,0]:(t.nodeType!==Node.TEXT_NODE&&t.childNodes.length>0&&(t.childNodes[n]!==void 0?(t=t.childNodes[n],n=0):(t=t.childNodes[n-1],t.textContent!==null&&(n=t.textContent.length))),[t,n])}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getCaretNodeAndOffset=void 0;var t=nn;Object.defineProperty(e,"getCaretNodeAndOffset",{enumerable:!0,get:function(){return t.getCaretNodeAndOffset}})})(en);var on={},an={};Object.defineProperty(an,"__esModule",{value:!0});an.getRange=sn;function sn(){var e=window.getSelection();return e&&e.rangeCount?e.getRangeAt(0):null}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getRange=void 0;var t=an;Object.defineProperty(e,"getRange",{enumerable:!0,get:function(){return t.getRange}})})(on);var ln={},cn={};Object.defineProperty(cn,"__esModule",{value:!0});cn.isCaretAtEndOfInput=fn;var dn=p,un=en,pn=Ft;function fn(e){var t=(0,dn.getDeepestNode)(e,!0);if(t===null)return!0;if((0,dn.isNativeInput)(t))return t.selectionEnd===t.value.length;var n=(0,un.getCaretNodeAndOffset)(),r=n[0],i=n[1];return r!==null&&(0,pn.checkContenteditableSliceForEmptiness)(e,r,i,"right")}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isCaretAtEndOfInput=void 0;var t=cn;Object.defineProperty(e,"isCaretAtEndOfInput",{enumerable:!0,get:function(){return t.isCaretAtEndOfInput}})})(ln);var hn={},vn={};Object.defineProperty(vn,"__esModule",{value:!0});vn.isCaretAtStartOfInput=yn;var gn=p,mn=nn,bn=$t;function yn(e){var t=(0,gn.getDeepestNode)(e);if(t===null||(0,gn.isEmpty)(e))return!0;if((0,gn.isNativeInput)(t))return t.selectionEnd===0;if((0,gn.isEmpty)(e))return!0;var n=(0,mn.getCaretNodeAndOffset)(),r=n[0],i=n[1];return r!==null&&(0,bn.checkContenteditableSliceForEmptiness)(e,r,i,"left")}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isCaretAtStartOfInput=void 0;var t=vn;Object.defineProperty(e,"isCaretAtStartOfInput",{enumerable:!0,get:function(){return t.isCaretAtStartOfInput}})})(hn);var kn={},Cn={};Object.defineProperty(Cn,"__esModule",{value:!0});Cn.save=Sn;var On=p,_n=an;function Sn(){var e=(0,_n.getRange)(),t=(0,On.make)("span");if(t.id="cursor",t.hidden=!0,!!e)return e.insertNode(t),function(){var n=window.getSelection();n&&(e.setStartAfter(t),e.setEndAfter(t),n.removeAllRanges(),n.addRange(e),setTimeout((function(){t.remove()}),150))}}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.save=void 0;var t=Cn;Object.defineProperty(e,"save",{enumerable:!0,get:function(){return t.save}})})(kn);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.save=e.isCaretAtStartOfInput=e.isCaretAtEndOfInput=e.getRange=e.getCaretNodeAndOffset=e.focus=e.getContenteditableSlice=e.checkContenteditableSliceForEmptiness=void 0;var t=Ft;Object.defineProperty(e,"checkContenteditableSliceForEmptiness",{enumerable:!0,get:function(){return t.checkContenteditableSliceForEmptiness}});var n=Vt;Object.defineProperty(e,"getContenteditableSlice",{enumerable:!0,get:function(){return n.getContenteditableSlice}});var r=Yt;Object.defineProperty(e,"focus",{enumerable:!0,get:function(){return r.focus}});var i=en;Object.defineProperty(e,"getCaretNodeAndOffset",{enumerable:!0,get:function(){return i.getCaretNodeAndOffset}});var o=on;Object.defineProperty(e,"getRange",{enumerable:!0,get:function(){return o.getRange}});var a=ln;Object.defineProperty(e,"isCaretAtEndOfInput",{enumerable:!0,get:function(){return a.isCaretAtEndOfInput}});var s=hn;Object.defineProperty(e,"isCaretAtStartOfInput",{enumerable:!0,get:function(){return s.isCaretAtStartOfInput}});var l=kn;Object.defineProperty(e,"save",{enumerable:!0,get:function(){return l.save}})})(Ht);class f{static get CSS(){return{...Dt,checklist:`${Wt}-checklist`,itemChecked:`${Wt}__checkbox--checked`,noHover:`${Wt}__checkbox--no-hover`,checkbox:`${Wt}__checkbox-check`,checkboxContainer:`${Wt}__checkbox`}}
/**
   * Assign passed readonly mode and config to relevant class properties
   * @param readonly - read-only mode flag
   * @param config - user config for Tool
   */constructor(e,t){this.config=t,this.readOnly=e
/**
   * Renders ul wrapper for list
   * @param isRoot - boolean variable that represents level of the wrappre (root or childList)
   * @returns - created html ul element
   */}renderWrapper(e){let t;return e===!0?(t=p.make("ul",[f.CSS.wrapper,f.CSS.checklist]),t.addEventListener("click",(e=>{const t=e.target;if(t){const e=t.closest(`.${f.CSS.checkboxContainer}`);e&&e.contains(t)&&this.toggleCheckbox(e)}}))):t=p.make("ul",[f.CSS.checklist,f.CSS.itemChildren]),t
/**
   * Redners list item element
   * @param content - content used in list item rendering
   * @param meta - meta of the list item used in rendering of the checklist
   * @returns - created html list item element
   */}renderItem(t,n){const r=p.make("li",[f.CSS.item,f.CSS.item]),i=p.make("div",f.CSS.itemContent,{innerHTML:t,contentEditable:(!this.readOnly).toString()}),o=p.make("span",f.CSS.checkbox),a=p.make("div",f.CSS.checkboxContainer);return n.checked===!0&&a.classList.add(f.CSS.itemChecked),o.innerHTML=e,a.appendChild(o),r.appendChild(a),r.appendChild(i),r
/**
   * Return the item content
   * @param item - item wrapper (<li>)
   * @returns - item content string
   */}getItemContent(e){const t=e.querySelector(`.${f.CSS.itemContent}`);return!t||p.isEmpty(t)?"":t.innerHTML}
/**
   * Return meta object of certain element
   * @param item - will be returned meta information of this item
   * @returns Item meta object
   */getItemMeta(e){const t=e.querySelector(`.${f.CSS.checkboxContainer}`);return{checked:!!t&&t.classList.contains(f.CSS.itemChecked)}}composeDefaultMeta(){return{checked:!1}}
/**
   * Toggle checklist item state
   * @param checkbox - checkbox element to be toggled
   */toggleCheckbox(e){e.classList.toggle(f.CSS.itemChecked),e.classList.add(f.CSS.noHover),e.addEventListener("mouseleave",(()=>this.removeSpecialHoverBehavior(e)),{once:!0})
/**
   * Removes class responsible for special hover behavior on an item
   * @param el - item wrapper
   */}removeSpecialHoverBehavior(e){e.classList.remove(f.CSS.noHover)}}function wn(e,t="after"){const n=[];let r;function i(e){switch(t){case"after":return e.nextElementSibling;case"before":return e.previousElementSibling}}for(r=i(e);r!==null;)n.push(r),r=i(r);return n.length!==0?n:null}function En(e,t=!0){let n=e;return e.classList.contains(Dt.item)&&(n=e.querySelector(`.${Dt.itemChildren}`)),n===null?[]:t?Array.from(n.querySelectorAll(`:scope > .${Dt.item}`)):Array.from(n.querySelectorAll(`.${Dt.item}`))}function xn(e){return e.nextElementSibling===null}function Pn(e){return e.querySelector(`.${Dt.itemChildren}`)!==null}function jn(e){return e.querySelector(`.${Dt.itemChildren}`)}function Mn(e){let t=e;e.classList.contains(Dt.item)&&(t=jn(e)),t!==null&&En(t).length===0&&t.remove()}function Tn(e){return e.querySelector(`.${Dt.itemContent}`)}function In(e,t=!0){const n=Tn(e);n&&Ht.focus(n,t)}class z{
/**
   * Getter method to get current item
   * @returns current list item or null if caret position is not undefined
   */
get currentItem(){const e=window.getSelection();if(!e)return null;let t=e.anchorNode;return t&&(Rt(t)||(t=t.parentNode),t)&&Rt(t)?t.closest(`.${Dt.item}`):null}get currentItemLevel(){const e=this.currentItem;if(e===null)return null;let t=e.parentNode,n=0;for(;t!==null&&t!==this.listWrapper;)Rt(t)&&t.classList.contains(Dt.item)&&(n+=1),t=t.parentNode;return n+1}
/**
   * Assign all passed params and renderer to relevant class properties
   * @param params - tool constructor options
   * @param params.data - previously saved data
   * @param params.config - user config for Tool
   * @param params.api - Editor.js API
   * @param params.readOnly - read-only mode flag
   * @param renderer - renderer instance initialized in tool class
   */constructor({data:e,config:t,api:n,readOnly:r,block:i},o){this.config=t,this.data=e,this.readOnly=r,this.api=n,this.block=i,this.renderer=o
/**
   * Function that is responsible for rendering list with contents
   * @returns Filled with content wrapper element of the list
   */}render(){return this.listWrapper=this.renderer.renderWrapper(!0),this.data.items.length?this.appendItems(this.data.items,this.listWrapper):this.appendItems([{content:"",meta:{},items:[]}],this.listWrapper),this.readOnly||this.listWrapper.addEventListener("keydown",(e=>{switch(e.key){case"Enter":e.shiftKey||this.enterPressed(e);break;case"Backspace":this.backspace(e);break;case"Tab":e.shiftKey?this.shiftTab(e):this.addTab(e);break}}),!1),"start"in this.data.meta&&this.data.meta.start!==void 0&&this.changeStartWith(this.data.meta.start),"counterType"in this.data.meta&&this.data.meta.counterType!==void 0&&this.changeCounters(this.data.meta.counterType),this.listWrapper
/**
   * Function that is responsible for list content saving
   * @param wrapper - optional argument wrapper
   * @returns whole list saved data if wrapper not passes, otherwise will return data of the passed wrapper
   */}save(e){const t=e??this.listWrapper,n=e=>En(e).map((e=>{const t=jn(e),r=this.renderer.getItemContent(e),i=this.renderer.getItemMeta(e),o=t?n(t):[];return{content:r,meta:i,items:o}})),r=t?n(t):[];let i={style:this.data.style,meta:{},items:r};return this.data.style==="ordered"&&(i.meta={start:this.data.meta.start,counterType:this.data.meta.counterType}),i
/**
   * On paste sanitzation config. Allow only tags that are allowed in the Tool.
   * @returns - config that determines tags supposted by paste handler
   * @todo - refactor and move to list instance
   */}static get pasteConfig(){return{tags:["OL","UL","LI"]}}
/**
   * Method that specified hot to merge two List blocks.
   * Called by Editor.js by backspace at the beginning of the Block
   *
   * Content of the first item of the next List would be merged with deepest item in current list
   * Other items of the next List would be appended to the current list without any changes in nesting levels
   * @param data - data of the second list to be merged with current
   */merge(e){const t=this.block.holder.querySelectorAll(`.${Dt.item}`),n=t[t.length-1],r=Tn(n);if(n===null||r===null||(r.insertAdjacentHTML("beforeend",e.items[0].content),this.listWrapper===void 0))return;const i=En(this.listWrapper);if(i.length===0)return;const o=i[i.length-1];let a=jn(o);const s=e.items.shift();s!==void 0&&(s.items.length!==0&&(a===null&&(a=this.renderer.renderWrapper(!1)),this.appendItems(s.items,a)),e.items.length>0&&this.appendItems(e.items,this.listWrapper)
/**
   * On paste callback that is fired from Editor.
   * @param event - event with pasted data
   * @todo - refactor and move to list instance
   */)}onPaste(e){const t=e.detail.data;this.data=this.pasteHandler(t);const n=this.listWrapper;n&&n.parentNode&&n.parentNode.replaceChild(this.render(),n)}
/**
   * Handle UL, OL and LI tags paste and returns List data
   * @param element - html element that contains whole list
   * @todo - refactor and move to list instance
   */pasteHandler(e){const{tagName:t}=e;let n,r="unordered";switch(t){case"OL":r="ordered",n="ol";break;case"UL":case"LI":r="unordered",n="ul"}const i={style:r,meta:{},items:[]};r==="ordered"&&(this.data.meta.counterType="numeric",this.data.meta.start=1);const o=e=>Array.from(e.querySelectorAll(":scope > li")).map((e=>{const t=e.querySelector(`:scope > ${n}`),r=t?o(t):[];return{content:e.innerHTML??"",meta:{},items:r}}));return i.items=o(e),i
/**
   * Changes ordered list start property value
   * @param index - new value of the start property
   */}changeStartWith(e){this.listWrapper.style.setProperty("counter-reset","item "+(e-1)),this.data.meta.start=e
/**
   * Changes ordered list counterType property value
   * @param counterType - new value of the counterType value
   */}changeCounters(e){this.listWrapper.style.setProperty("--list-counter-type",e),this.data.meta.counterType=e
/**
   * Handles Enter keypress
   * @param event - keydown
   */}enterPressed(e){var t;const n=this.currentItem;if(e.stopPropagation(),e.preventDefault(),e.isComposing||n===null)return;const r=((t=this.renderer)==null?void 0:t.getItemContent(n).trim().length)===0,i=n.parentNode===this.listWrapper,o=n.previousElementSibling===null,a=this.api.blocks.getCurrentBlockIndex();if(i&&r){if(xn(n)&&!Pn(n)){o?this.convertItemToDefaultBlock(a,!0):this.convertItemToDefaultBlock();return}this.splitList(n)}else r?this.unshiftItem(n):this.splitItem(n)}
/**
   * Handle backspace
   * @param event - keydown
   */backspace(e){var t;const n=this.currentItem;if(n!==null&&Ht.isCaretAtStartOfInput(n)&&((t=window.getSelection())==null?void 0:t.isCollapsed)!==!1){if(e.stopPropagation(),n.parentNode===this.listWrapper&&n.previousElementSibling===null){this.convertFirstItemToDefaultBlock();return}e.preventDefault(),this.mergeItemWithPrevious(n)}}
/**
   * Reduce indentation for current item
   * @param event - keydown
   */shiftTab(e){e.stopPropagation(),e.preventDefault(),this.currentItem!==null&&this.unshiftItem(this.currentItem)
/**
   * Decrease indentation of the passed item
   * @param item - list item to be unshifted
   */}unshiftItem(e){if(!e.parentNode||!Rt(e.parentNode))return;const t=e.parentNode.closest(`.${Dt.item}`);if(!t)return;let n=jn(e);if(e.parentElement===null)return;const r=wn(e);r!==null&&(n===null&&(n=this.renderer.renderWrapper(!1)),r.forEach((e=>{n.appendChild(e)})),e.appendChild(n)),t.after(e),In(e,!1),Mn(t)
/**
   * Method that is used for list splitting and moving trailing items to the new separated list
   * @param item - current item html element
   */}splitList(e){const t=En(e),n=this.block,r=this.api.blocks.getCurrentBlockIndex();if(t.length!==0){const n=t[0];this.unshiftItem(n),In(e,!1)}if(e.previousElementSibling===null&&e.parentNode===this.listWrapper){this.convertItemToDefaultBlock(r);return}const i=wn(e);if(i===null)return;const o=this.renderer.renderWrapper(!0);i.forEach((e=>{o.appendChild(e)}));const a=this.save(o);a.meta.start=this.data.style=="ordered"?1:void 0,this.api.blocks.insert(n==null?void 0:n.name,a,this.config,r+1),this.convertItemToDefaultBlock(r+1),o.remove()
/**
   * Method that is used for splitting item content and moving trailing content to the new sibling item
   * @param currentItem - current item html element
   */}splitItem(e){const[t,n]=Ht.getCaretNodeAndOffset();if(t===null)return;const r=Tn(e);let i;i=r===null?"":Ht.getContenteditableSlice(r,t,n,"right",!0);const o=jn(e),a=this.renderItem(i);e==null||e.after(a),o&&a.appendChild(o),In(a)
/**
   * Method that is used for merging current item with previous one
   * Content of the current item would be appended to the previous item
   * Current item children would not change nesting level
   * @param item - current item html element
   */}mergeItemWithPrevious(e){const t=e.previousElementSibling,n=e.parentNode;if(n===null||!Rt(n))return;const r=n.closest(`.${Dt.item}`);if(!t&&!r||t&&!Rt(t))return;let i;if(t){const e=En(t,!1);i=e.length!==0&&e.length!==0?e[e.length-1]:t}else i=r;const o=this.renderer.getItemContent(e);if(!i)return;In(i,!1);const a=Tn(i);if(a===null)return;a.insertAdjacentHTML("beforeend",o);const s=En(e);if(s.length===0){e.remove(),Mn(i);return}const l=t||r,c=jn(l)??this.renderer.renderWrapper(!1);t?s.forEach((e=>{c.appendChild(e)})):s.forEach((e=>{c.prepend(e)})),jn(l)===null&&i.appendChild(c),e.remove()
/**
   * Add indentation to current item
   * @param event - keydown
   */}addTab(e){var t;e.stopPropagation(),e.preventDefault();const n=this.currentItem;if(!n)return;if(((t=this.config)==null?void 0:t.maxLevel)!==void 0){const e=this.currentItemLevel;if(e!==null&&e===this.config.maxLevel)return}const r=n.previousSibling;if(r===null||!Rt(r))return;const i=jn(r);if(i)i.appendChild(n),En(n).forEach((e=>{i.appendChild(e)}));else{const e=this.renderer.renderWrapper(!1);e.appendChild(n),En(n).forEach((t=>{e.appendChild(t)})),r.appendChild(e)}Mn(n),In(n,!1)
/**
   * Convert current item to default block with passed index
   * @param newBloxkIndex - optional parameter represents index, where would be inseted default block
   * @param removeList - optional parameter, that represents condition, if List should be removed
   */}convertItemToDefaultBlock(e,t){let n;const r=this.currentItem,i=r!==null?this.renderer.getItemContent(r):"";t===!0&&this.api.blocks.delete(),n=e!==void 0?this.api.blocks.insert(void 0,{text:i},void 0,e):this.api.blocks.insert(),r==null||r.remove(),this.api.caret.setToBlock(n,"start")}convertFirstItemToDefaultBlock(){const e=this.currentItem;if(e===null)return;const t=En(e);if(t.length!==0){const n=t[0];this.unshiftItem(n),In(e)}const n=wn(e),r=this.api.blocks.getCurrentBlockIndex(),i=n===null;this.convertItemToDefaultBlock(r,i)}
/**
   * Method that calls render function of the renderer with a necessary item meta cast
   * @param itemContent - content to be rendered in new item
   * @param meta - meta used in list item rendering
   * @returns html element of the rendered item
   */renderItem(e,t){const n=t??this.renderer.composeDefaultMeta();switch(!0){case this.renderer instanceof v:return this.renderer.renderItem(e,n);case this.renderer instanceof b:return this.renderer.renderItem(e,n);default:return this.renderer.renderItem(e,n)}}
/**
   * Renders children list
   * @param items - list data used in item rendering
   * @param parentElement - where to append passed items
   */appendItems(e,t){e.forEach((e=>{var n;const r=this.renderItem(e.content,e.meta);if(t.appendChild(r),e.items.length){const t=(n=this.renderer)==null?void 0:n.renderWrapper(!1);this.appendItems(e.items,t),r.appendChild(t)}}))}}const Ln={wrapper:`${Wt}-start-with-field`,input:`${Wt}-start-with-field__input`,startWithElementWrapperInvalid:`${Wt}-start-with-field--invalid`};function Nn(e,{value:t,placeholder:n,attributes:r,sanitize:i}){const o=p.make("div",Ln.wrapper),a=p.make("input",Ln.input,{placeholder:n,tabIndex:-1,value:t});for(const e in r)a.setAttribute(e,r[e]);return o.appendChild(a),a.addEventListener("input",(()=>{i!==void 0&&(a.value=i(a.value));const t=a.checkValidity();!t&&!o.classList.contains(Ln.startWithElementWrapperInvalid)&&o.classList.add(Ln.startWithElementWrapperInvalid),t&&o.classList.contains(Ln.startWithElementWrapperInvalid)&&o.classList.remove(Ln.startWithElementWrapperInvalid),t&&e(a.value)})),o}const An=new Map([["Numeric","numeric"],["Lower Roman","lower-roman"],["Upper Roman","upper-roman"],["Lower Alpha","lower-alpha"],["Upper Alpha","upper-alpha"]]),Bn=new Map([["numeric",i],["lower-roman",o],["upper-roman",a],["lower-alpha",l],["upper-alpha",s]]);function Wn(e){return e.replace(/\D+/g,"")}function Dn(e){return typeof e.items[0]=="string"}function Rn(e){return!("meta"in e)}function Hn(e){return typeof e.items[0]!="string"&&"text"in e.items[0]&&"checked"in e.items[0]&&typeof e.items[0].text=="string"&&typeof e.items[0].checked=="boolean"}function Fn(e){const t=[];return Dn(e)?(e.items.forEach((e=>{t.push({content:e,meta:{},items:[]})})),{style:e.style,meta:{},items:t}):Hn(e)?(e.items.forEach((e=>{t.push({content:e.text,meta:{checked:e.checked},items:[]})})),{style:"checklist",meta:{},items:t}):Rn(e)?{style:e.style,meta:{},items:e.items}:structuredClone(e)}class G{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}static get toolbox(){return[{icon:n,title:"Unordered List",data:{style:"unordered"}},{icon:r,title:"Ordered List",data:{style:"ordered"}},{icon:t,title:"Checklist",data:{style:"checklist"}}]}
/**
   * On paste sanitzation config. Allow only tags that are allowed in the Tool.
   * @returns - paste config object used in editor
   */static get pasteConfig(){return{tags:["OL","UL","LI"]}}static get conversionConfig(){return{export:e=>G.joinRecursive(e),import:(e,t)=>({meta:{},items:[{content:e,meta:{},items:[]}],style:(t==null?void 0:t.defaultStyle)!==void 0?t.defaultStyle:"unordered"})}}get listStyle(){return this.data.style||this.defaultListStyle}
/**
   * Set list style
   * @param style - new style to set
   */set listStyle(e){var t;this.data.style=e,this.changeTabulatorByStyle();const n=this.list.render();(t=this.listElement)==null||t.replaceWith(n),this.listElement=n
/**
   * Render plugin`s main Element and fill it with saved data
   * @param params - tool constructor options
   * @param params.data - previously saved data
   * @param params.config - user config for Tool
   * @param params.api - Editor.js API
   * @param params.readOnly - read-only mode flag
   */}constructor({data:e,config:t,api:n,readOnly:r,block:i}){var o;this.api=n,this.readOnly=r,this.config=t,this.block=i,this.defaultListStyle=((o=this.config)==null?void 0:o.defaultStyle)||"unordered",this.defaultCounterTypes=this.config.counterTypes||Array.from(An.values());const a={style:this.defaultListStyle,meta:{},items:[]};this.data=Object.keys(e).length?Fn(e):a,this.listStyle==="ordered"&&this.data.meta.counterType===void 0&&(this.data.meta.counterType="numeric"),this.changeTabulatorByStyle()
/**
   * Convert from list to text for conversionConfig
   * @param data - current data of the list
   * @returns - string of the recursively merged contents of the items of the list
   */}static joinRecursive(e){return e.items.map((e=>`${e.content} ${G.joinRecursive(e)}`)).join("")}
/**
   * Function that is responsible for content rendering
   * @returns rendered list wrapper with all contents
   */render(){return this.listElement=this.list.render(),this.listElement
/**
   * Function that is responsible for content saving
   * @returns formatted content used in editor
   */}save(){return this.data=this.list.save(),this.data
/**
   * Function that is responsible for mergind two lists into one
   * @param data - data of the next standing list, that should be merged with current
   */}merge(e){this.list.merge(e)}
/**
   * Creates Block Tune allowing to change the list style
   * @returns array of tune configs
   */renderSettings(){const e=[{label:this.api.i18n.t("Unordered"),icon:n,closeOnActivate:!0,isActive:this.listStyle=="unordered",onActivate:()=>{this.listStyle="unordered"}},{label:this.api.i18n.t("Ordered"),icon:r,closeOnActivate:!0,isActive:this.listStyle=="ordered",onActivate:()=>{this.listStyle="ordered"}},{label:this.api.i18n.t("Checklist"),icon:t,closeOnActivate:!0,isActive:this.listStyle=="checklist",onActivate:()=>{this.listStyle="checklist"}}];if(this.listStyle==="ordered"){const t=Nn((e=>this.changeStartWith(Number(e))),{value:String(this.data.meta.start??1),placeholder:"",attributes:{required:"true"},sanitize:e=>Wn(e)}),n=[{label:this.api.i18n.t("Start with"),icon:c,children:{items:[{element:t,type:"html"}]}}],r={label:this.api.i18n.t("Counter type"),icon:Bn.get(this.data.meta.counterType),children:{items:[]}};An.forEach(((e,t)=>{const n=An.get(t);this.defaultCounterTypes.includes(n)&&r.children.items.push({title:this.api.i18n.t(t),icon:Bn.get(n),isActive:this.data.meta.counterType===An.get(t),closeOnActivate:!0,onActivate:()=>{this.changeCounters(An.get(t))}})})),r.children.items.length>1&&n.push(r),e.push({type:"separator"},...n)}return e}
/**
   * On paste callback that is fired from Editor.
   * @param event - event with pasted data
   */onPaste(e){const{tagName:t}=e.detail.data;switch(t){case"OL":this.listStyle="ordered";break;case"UL":case"LI":this.listStyle="unordered"}this.list.onPaste(e)}
/**
   * Handle UL, OL and LI tags paste and returns List data
   * @param element - html element that contains whole list
   */pasteHandler(e){return this.list.pasteHandler(e)}
/**
   * Changes ordered list counterType property value
   * @param counterType - new value of the counterType value
   */changeCounters(e){var t;(t=this.list)==null||t.changeCounters(e),this.data.meta.counterType=e
/**
   * Changes ordered list start property value
   * @param index - new value of the start property
   */}changeStartWith(e){var t;(t=this.list)==null||t.changeStartWith(e),this.data.meta.start=e}changeTabulatorByStyle(){switch(this.listStyle){case"ordered":this.list=new z({data:this.data,readOnly:this.readOnly,api:this.api,config:this.config,block:this.block},new v(this.readOnly,this.config));break;case"unordered":this.list=new z({data:this.data,readOnly:this.readOnly,api:this.api,config:this.config,block:this.block},new b(this.readOnly,this.config));break;case"checklist":this.list=new z({data:this.data,readOnly:this.readOnly,api:this.api,config:this.config,block:this.block},new f(this.readOnly,this.config));break}}}export{G as default};

