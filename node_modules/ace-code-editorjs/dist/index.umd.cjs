(function(i,a){typeof exports=="object"&&typeof module<"u"?module.exports=a(require("ace-builds")):typeof define=="function"&&define.amd?define(["ace-builds"],a):(i=typeof globalThis<"u"?globalThis:i||self,i["ace-code-editorjs"]=a(i.ace))})(this,function(i){"use strict";var h=Object.defineProperty;var p=(i,a,s)=>a in i?h(i,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[a]=s;var d=(i,a,s)=>(p(i,typeof a!="symbol"?a+"":a,s),s);const a='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 8L5 12L9 16"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 8L19 12L15 16"/></svg>',s={plain:{mode:"ace/mode/plain_text",label:"Plain Text"}};class g{constructor(n){d(this,"api");d(this,"readOnly");d(this,"nodes");d(this,"ace");d(this,"_data");d(this,"config");const{data:e,api:t,config:r,readOnly:o}=n;this.api=t,this.readOnly=!!o,this.config={languages:s,...r},this._data={code:(e==null?void 0:e.code)||"",language:(e==null?void 0:e.language)||"plain"},this.nodes=this.drawView()}static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}drawView(){var r;const n=document.createElement("div"),e=document.createElement("div");e.style.marginTop="10px",this.ace=i.edit(e,{maxLines:1/0,...this.config.options,readOnly:this.readOnly,value:this.data.code,mode:this.data.language?(r=this.config.languages[this.data.language])==null?void 0:r.mode:void 0});const t=document.createElement("select");for(const o in this.config.languages)if(Object.prototype.hasOwnProperty.call(this.config.languages,o)){const c=this.config.languages[o];let l=document.createElement("option");l.value=o,l.text=c.label,t.appendChild(l)}return t.classList.add(this.api.styles.input),t.value=this.data.language,t.onchange=o=>{var l,u;let c=o.target.value;this._data.language=c,(u=this.ace)==null||u.session.setMode((l=this.config.languages[c])==null?void 0:l.mode)},this.readOnly&&(t.disabled=!0),n.classList.add(this.api.styles.block),n.appendChild(t),n.appendChild(e),{holder:n,select:t}}render(){return this.nodes.holder}save(n){var e;return{code:(e=this.ace)==null?void 0:e.getValue(),language:this.data.language}}onPaste(n){var t;const e=n.detail.data;this._data.code=e.textContent,(t=this.ace)==null||t.setValue(e.textContent)}get data(){return this._data}set data(n){var e,t;this._data=n,this.ace&&this.ace.setValue(n.code),this.nodes.select&&(this.nodes.select.value=n.language,(t=this.ace)==null||t.session.setMode((e=this.config.languages[n.language])==null?void 0:e.mode))}static get toolbox(){return{icon:a,title:"Ace Code"}}static get pasteConfig(){return{tags:["pre"]}}static get sanitize(){return{code:!0}}}return g});
